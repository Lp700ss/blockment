{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.averageResponseTime = averageResponseTime;\nexports.canBeUsed = canBeUsed;\nexports.close = close;\nexports.create = create;\nexports.microSeconds = exports[\"default\"] = void 0;\nexports.onMessage = onMessage;\nexports.postMessage = postMessage;\nexports.type = void 0;\n\nvar _util = require(\"../util\");\n\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar type = 'native';\nexports.type = type;\n\nfunction create(channelName) {\n  var state = {\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName),\n    subFns: [] // subscriberFunctions\n\n  };\n\n  state.bc.onmessage = function (msg) {\n    if (state.messagesCallback) {\n      state.messagesCallback(msg.data);\n    }\n  };\n\n  return state;\n}\n\nfunction close(channelState) {\n  channelState.bc.close();\n  channelState.subFns = [];\n}\n\nfunction postMessage(channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false);\n    return _util.PROMISE_RESOLVED_VOID;\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\n\nfunction onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\n\nfunction canBeUsed() {\n  /**\n   * in the electron-renderer, isNode will be true even if we are in browser-context\n   * so we also check if window is undefined\n   */\n  if (_util.isNode && typeof window === 'undefined') return false;\n\n  if (typeof BroadcastChannel === 'function') {\n    if (BroadcastChannel._pubkey) {\n      throw new Error('BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill');\n    }\n\n    return true;\n  } else return false;\n}\n\nfunction averageResponseTime() {\n  return 150;\n}\n\nvar _default = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports[\"default\"] = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","averageResponseTime","canBeUsed","close","create","microSeconds","onMessage","postMessage","type","_util","require","channelName","state","messagesCallback","bc","BroadcastChannel","subFns","onmessage","msg","data","channelState","messageJson","PROMISE_RESOLVED_VOID","err","Promise","reject","fn","isNode","window","_pubkey","Error","_default"],"sources":["E:/intoweb3/NBlockment/blockment/node_modules/broadcast-channel/dist/lib/methods/native.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.averageResponseTime = averageResponseTime;\nexports.canBeUsed = canBeUsed;\nexports.close = close;\nexports.create = create;\nexports.microSeconds = exports[\"default\"] = void 0;\nexports.onMessage = onMessage;\nexports.postMessage = postMessage;\nexports.type = void 0;\n\nvar _util = require(\"../util\");\n\nvar microSeconds = _util.microSeconds;\nexports.microSeconds = microSeconds;\nvar type = 'native';\nexports.type = type;\n\nfunction create(channelName) {\n  var state = {\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName),\n    subFns: [] // subscriberFunctions\n\n  };\n\n  state.bc.onmessage = function (msg) {\n    if (state.messagesCallback) {\n      state.messagesCallback(msg.data);\n    }\n  };\n\n  return state;\n}\n\nfunction close(channelState) {\n  channelState.bc.close();\n  channelState.subFns = [];\n}\n\nfunction postMessage(channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false);\n    return _util.PROMISE_RESOLVED_VOID;\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\n\nfunction onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\n\nfunction canBeUsed() {\n  /**\n   * in the electron-renderer, isNode will be true even if we are in browser-context\n   * so we also check if window is undefined\n   */\n  if (_util.isNode && typeof window === 'undefined') return false;\n\n  if (typeof BroadcastChannel === 'function') {\n    if (BroadcastChannel._pubkey) {\n      throw new Error('BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill');\n    }\n\n    return true;\n  } else return false;\n}\n\nfunction averageResponseTime() {\n  return 150;\n}\n\nvar _default = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};\nexports[\"default\"] = _default;"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAC3CC,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,mBAAR,GAA8BA,mBAA9B;AACAF,OAAO,CAACG,SAAR,GAAoBA,SAApB;AACAH,OAAO,CAACI,KAAR,GAAgBA,KAAhB;AACAJ,OAAO,CAACK,MAAR,GAAiBA,MAAjB;AACAL,OAAO,CAACM,YAAR,GAAuBN,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAAjD;AACAA,OAAO,CAACO,SAAR,GAAoBA,SAApB;AACAP,OAAO,CAACQ,WAAR,GAAsBA,WAAtB;AACAR,OAAO,CAACS,IAAR,GAAe,KAAK,CAApB;;AAEA,IAAIC,KAAK,GAAGC,OAAO,CAAC,SAAD,CAAnB;;AAEA,IAAIL,YAAY,GAAGI,KAAK,CAACJ,YAAzB;AACAN,OAAO,CAACM,YAAR,GAAuBA,YAAvB;AACA,IAAIG,IAAI,GAAG,QAAX;AACAT,OAAO,CAACS,IAAR,GAAeA,IAAf;;AAEA,SAASJ,MAAT,CAAgBO,WAAhB,EAA6B;EAC3B,IAAIC,KAAK,GAAG;IACVC,gBAAgB,EAAE,IADR;IAEVC,EAAE,EAAE,IAAIC,gBAAJ,CAAqBJ,WAArB,CAFM;IAGVK,MAAM,EAAE,EAHE,CAGC;;EAHD,CAAZ;;EAOAJ,KAAK,CAACE,EAAN,CAASG,SAAT,GAAqB,UAAUC,GAAV,EAAe;IAClC,IAAIN,KAAK,CAACC,gBAAV,EAA4B;MAC1BD,KAAK,CAACC,gBAAN,CAAuBK,GAAG,CAACC,IAA3B;IACD;EACF,CAJD;;EAMA,OAAOP,KAAP;AACD;;AAED,SAAST,KAAT,CAAeiB,YAAf,EAA6B;EAC3BA,YAAY,CAACN,EAAb,CAAgBX,KAAhB;EACAiB,YAAY,CAACJ,MAAb,GAAsB,EAAtB;AACD;;AAED,SAAST,WAAT,CAAqBa,YAArB,EAAmCC,WAAnC,EAAgD;EAC9C,IAAI;IACFD,YAAY,CAACN,EAAb,CAAgBP,WAAhB,CAA4Bc,WAA5B,EAAyC,KAAzC;IACA,OAAOZ,KAAK,CAACa,qBAAb;EACD,CAHD,CAGE,OAAOC,GAAP,EAAY;IACZ,OAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;EACD;AACF;;AAED,SAASjB,SAAT,CAAmBc,YAAnB,EAAiCM,EAAjC,EAAqC;EACnCN,YAAY,CAACP,gBAAb,GAAgCa,EAAhC;AACD;;AAED,SAASxB,SAAT,GAAqB;EACnB;AACF;AACA;AACA;EACE,IAAIO,KAAK,CAACkB,MAAN,IAAgB,OAAOC,MAAP,KAAkB,WAAtC,EAAmD,OAAO,KAAP;;EAEnD,IAAI,OAAOb,gBAAP,KAA4B,UAAhC,EAA4C;IAC1C,IAAIA,gBAAgB,CAACc,OAArB,EAA8B;MAC5B,MAAM,IAAIC,KAAJ,CAAU,qGAAV,CAAN;IACD;;IAED,OAAO,IAAP;EACD,CAND,MAMO,OAAO,KAAP;AACR;;AAED,SAAS7B,mBAAT,GAA+B;EAC7B,OAAO,GAAP;AACD;;AAED,IAAI8B,QAAQ,GAAG;EACb3B,MAAM,EAAEA,MADK;EAEbD,KAAK,EAAEA,KAFM;EAGbG,SAAS,EAAEA,SAHE;EAIbC,WAAW,EAAEA,WAJA;EAKbL,SAAS,EAAEA,SALE;EAMbM,IAAI,EAAEA,IANO;EAObP,mBAAmB,EAAEA,mBAPR;EAQbI,YAAY,EAAEA;AARD,CAAf;AAUAN,OAAO,CAAC,SAAD,CAAP,GAAqBgC,QAArB"},"metadata":{},"sourceType":"script"}