{"ast":null,"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _ParseUser = _interopRequireDefault(require(\"./ParseUser\"));\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseACL = _interopRequireDefault(require(\"./ParseACL\"));\n\nvar _createSigningData = _interopRequireDefault(require(\"./createSigningData\"));\n/* global window */\n\n\nvar INIT_ERROR = 'Could not initialise ledger app, make sure Elrond app is open';\n\nfunction getErdJs() {\n  return MoralisErd.getErdJs();\n}\n\nvar MoralisErd = /*#__PURE__*/function () {\n  function MoralisErd() {\n    (0, _classCallCheck2.default)(this, MoralisErd);\n  }\n\n  (0, _createClass2.default)(MoralisErd, null, [{\n    key: \"getErdJs\",\n    value: function () {\n      if (typeof window !== 'undefined' && window.erdjs) return window.erdjs;\n      throw new Error('Please add erdjs scripts');\n    }\n  }, {\n    key: \"gatewayAddress\",\n    value: function () {\n      return 'https://gateway.elrond.com';\n    }\n  }, {\n    key: \"hwProxy\",\n    value: function () {\n      var _hwProxy = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var _getErdJs, ProxyProvider, proxy;\n\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!MoralisErd._proxy) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", MoralisErd._proxy);\n\n              case 2:\n                _getErdJs = getErdJs(), ProxyProvider = _getErdJs.ProxyProvider;\n                proxy = new ProxyProvider(MoralisErd.gatewayAddress());\n                MoralisErd._proxy = proxy;\n                return _context.abrupt(\"return\", MoralisErd._proxy);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function () {\n        return _hwProxy.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"hwProvider\",\n    value: function () {\n      return MoralisErd._hw;\n    }\n  }, {\n    key: \"enable\",\n    value: function () {\n      var _enable = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        var _getErdJs2, HWProvider, proxy, hw, success;\n\n        return _regenerator.default.wrap(function (_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _getErdJs2 = getErdJs(), HWProvider = _getErdJs2.HWProvider;\n                _context2.next = 3;\n                return MoralisErd.hwProxy();\n\n              case 3:\n                proxy = _context2.sent;\n                hw = new HWProvider(proxy);\n                _context2.next = 7;\n                return hw.init();\n\n              case 7:\n                success = _context2.sent;\n\n                if (success) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                throw new Error(INIT_ERROR);\n\n              case 10:\n                MoralisErd._hw = hw;\n                return _context2.abrupt(\"return\", hw);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function () {\n        return _enable.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"authenticate\",\n    value: function () {\n      var _authenticate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        var hw, address, erdAddress, accounts, message, data, signature, authData, user;\n        return _regenerator.default.wrap(function (_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return MoralisErd.enable();\n\n              case 2:\n                hw = _context3.sent;\n                _context3.next = 5;\n                return hw.login();\n\n              case 5:\n                address = _context3.sent; // const account = await proxy.getAccount(address);\n\n                erdAddress = address.toLowerCase();\n                accounts = [erdAddress];\n                message = MoralisErd.getSigningData();\n                _context3.next = 11;\n                return (0, _createSigningData.default)(message);\n\n              case 11:\n                data = _context3.sent;\n                _context3.next = 14;\n                return MoralisErd.sign(data);\n\n              case 14:\n                signature = _context3.sent;\n                authData = {\n                  id: erdAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context3.next = 18;\n                return _ParseUser.default.logInWith('moralisErd', {\n                  authData: authData\n                });\n\n              case 18:\n                user = _context3.sent;\n\n                if (user) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                throw new Error('Could not get user');\n\n              case 21:\n                _context3.next = 23;\n                return user.setACL(new _ParseACL.default(user));\n\n              case 23:\n                user.addAllUnique('erdAccounts', accounts);\n                user.set('erdAddress', erdAddress);\n                _context3.next = 27;\n                return user.save();\n\n              case 27:\n                return _context3.abrupt(\"return\", user);\n\n              case 28:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function () {\n        return _authenticate.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"link\",\n    value: function () {\n      var _link = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(account, options) {\n        var message, user, erdAddress, ErdAddress, query, erdAddressRecord, data, signature, authData;\n        return _regenerator.default.wrap(function (_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                message = (options === null || options === void 0 ? void 0 : options.signingMessage) || MoralisErd.getSigningData();\n                _context4.next = 3;\n                return _ParseUser.default.current();\n\n              case 3:\n                user = _context4.sent;\n                erdAddress = account.toLowerCase();\n                ErdAddress = _ParseObject.default.extend('_ErdAddress');\n                query = new _ParseQuery.default(ErdAddress);\n                _context4.next = 9;\n                return query.get(erdAddress).catch(function () {\n                  return null;\n                });\n\n              case 9:\n                erdAddressRecord = _context4.sent;\n\n                if (erdAddressRecord) {\n                  _context4.next = 20;\n                  break;\n                }\n\n                _context4.next = 13;\n                return (0, _createSigningData.default)(message);\n\n              case 13:\n                data = _context4.sent;\n                _context4.next = 16;\n                return MoralisErd.sign(data);\n\n              case 16:\n                signature = _context4.sent;\n                authData = {\n                  id: erdAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context4.next = 20;\n                return user.linkWith('moralisErd', {\n                  authData: authData\n                });\n\n              case 20:\n                user.addAllUnique('erdAccounts', [erdAddress]);\n                user.set('erdAddress', erdAddress);\n                _context4.next = 24;\n                return user.save();\n\n              case 24:\n                return _context4.abrupt(\"return\", user);\n\n              case 25:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function () {\n        return _link.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"unlink\",\n    value: function () {\n      var _unlink = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(account) {\n        var _user$get;\n\n        var accountsLower, ErdAddress, query, erdAddressRecord, user, accounts, nextAccounts;\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                accountsLower = account.toLowerCase();\n                ErdAddress = _ParseObject.default.extend('_ErdAddress');\n                query = new _ParseQuery.default(ErdAddress);\n                _context5.next = 5;\n                return query.get(accountsLower);\n\n              case 5:\n                erdAddressRecord = _context5.sent;\n                _context5.next = 8;\n                return erdAddressRecord.destroy();\n\n              case 8:\n                _context5.next = 10;\n                return _ParseUser.default.current();\n\n              case 10:\n                user = _context5.sent;\n                accounts = (_user$get = user.get('erdAccounts')) !== null && _user$get !== void 0 ? _user$get : [];\n                nextAccounts = (0, _filter.default)(accounts).call(accounts, function (v) {\n                  return v !== accountsLower;\n                });\n                user.set('erdAccounts', nextAccounts);\n                user.set('erdAddress', nextAccounts[0]);\n                _context5.next = 17;\n                return user._unlinkFrom('moralisErd');\n\n              case 17:\n                _context5.next = 19;\n                return user.save();\n\n              case 19:\n                return _context5.abrupt(\"return\", user);\n\n              case 20:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function () {\n        return _unlink.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"sign\",\n    value: function () {\n      var _sign = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(data) {\n        return _regenerator.default.wrap(function (_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                return _context6.abrupt(\"return\", data);\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function () {\n        return _sign.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getSigningData\",\n    value: function () {\n      return 'Moralis Authentication';\n    }\n  }]);\n  return MoralisErd;\n}();\n\nvar _default = MoralisErd;\nexports.default = _default;","map":{"version":3,"names":["_Object$defineProperty","require","_interopRequireDefault","exports","value","default","_filter","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_ParseUser","_ParseQuery","_ParseObject","_ParseACL","_createSigningData","INIT_ERROR","getErdJs","MoralisErd","key","window","erdjs","Error","_hwProxy","mark","_callee","_getErdJs","ProxyProvider","proxy","wrap","_context","prev","next","_proxy","abrupt","gatewayAddress","stop","apply","arguments","_hw","_enable","_callee2","_getErdJs2","HWProvider","hw","success","_context2","hwProxy","sent","init","_authenticate","_callee3","address","erdAddress","accounts","message","data","signature","authData","user","_context3","enable","login","toLowerCase","getSigningData","sign","id","logInWith","setACL","addAllUnique","set","save","_link","_callee4","account","options","ErdAddress","query","erdAddressRecord","_context4","signingMessage","current","extend","get","catch","linkWith","_unlink","_callee5","_user$get","accountsLower","nextAccounts","_context5","destroy","call","v","_unlinkFrom","_sign","_callee6","_context6","_default"],"sources":["E:/intoweb3/NBlockment/blockment/node_modules/moralis/lib/browser/MoralisErd.js"],"sourcesContent":["\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _ParseUser = _interopRequireDefault(require(\"./ParseUser\"));\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseACL = _interopRequireDefault(require(\"./ParseACL\"));\n\nvar _createSigningData = _interopRequireDefault(require(\"./createSigningData\"));\n/* global window */\n\n\nvar INIT_ERROR = 'Could not initialise ledger app, make sure Elrond app is open';\n\nfunction getErdJs() {\n  return MoralisErd.getErdJs();\n}\n\nvar MoralisErd = /*#__PURE__*/function () {\n  function MoralisErd() {\n    (0, _classCallCheck2.default)(this, MoralisErd);\n  }\n\n  (0, _createClass2.default)(MoralisErd, null, [{\n    key: \"getErdJs\",\n    value: function () {\n      if (typeof window !== 'undefined' && window.erdjs) return window.erdjs;\n      throw new Error('Please add erdjs scripts');\n    }\n  }, {\n    key: \"gatewayAddress\",\n    value: function () {\n      return 'https://gateway.elrond.com';\n    }\n  }, {\n    key: \"hwProxy\",\n    value: function () {\n      var _hwProxy = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var _getErdJs, ProxyProvider, proxy;\n\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!MoralisErd._proxy) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", MoralisErd._proxy);\n\n              case 2:\n                _getErdJs = getErdJs(), ProxyProvider = _getErdJs.ProxyProvider;\n                proxy = new ProxyProvider(MoralisErd.gatewayAddress());\n                MoralisErd._proxy = proxy;\n                return _context.abrupt(\"return\", MoralisErd._proxy);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function () {\n        return _hwProxy.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"hwProvider\",\n    value: function () {\n      return MoralisErd._hw;\n    }\n  }, {\n    key: \"enable\",\n    value: function () {\n      var _enable = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        var _getErdJs2, HWProvider, proxy, hw, success;\n\n        return _regenerator.default.wrap(function (_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _getErdJs2 = getErdJs(), HWProvider = _getErdJs2.HWProvider;\n                _context2.next = 3;\n                return MoralisErd.hwProxy();\n\n              case 3:\n                proxy = _context2.sent;\n                hw = new HWProvider(proxy);\n                _context2.next = 7;\n                return hw.init();\n\n              case 7:\n                success = _context2.sent;\n\n                if (success) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                throw new Error(INIT_ERROR);\n\n              case 10:\n                MoralisErd._hw = hw;\n                return _context2.abrupt(\"return\", hw);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function () {\n        return _enable.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"authenticate\",\n    value: function () {\n      var _authenticate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        var hw, address, erdAddress, accounts, message, data, signature, authData, user;\n        return _regenerator.default.wrap(function (_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return MoralisErd.enable();\n\n              case 2:\n                hw = _context3.sent;\n                _context3.next = 5;\n                return hw.login();\n\n              case 5:\n                address = _context3.sent; // const account = await proxy.getAccount(address);\n\n                erdAddress = address.toLowerCase();\n                accounts = [erdAddress];\n                message = MoralisErd.getSigningData();\n                _context3.next = 11;\n                return (0, _createSigningData.default)(message);\n\n              case 11:\n                data = _context3.sent;\n                _context3.next = 14;\n                return MoralisErd.sign(data);\n\n              case 14:\n                signature = _context3.sent;\n                authData = {\n                  id: erdAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context3.next = 18;\n                return _ParseUser.default.logInWith('moralisErd', {\n                  authData: authData\n                });\n\n              case 18:\n                user = _context3.sent;\n\n                if (user) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                throw new Error('Could not get user');\n\n              case 21:\n                _context3.next = 23;\n                return user.setACL(new _ParseACL.default(user));\n\n              case 23:\n                user.addAllUnique('erdAccounts', accounts);\n                user.set('erdAddress', erdAddress);\n                _context3.next = 27;\n                return user.save();\n\n              case 27:\n                return _context3.abrupt(\"return\", user);\n\n              case 28:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function () {\n        return _authenticate.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"link\",\n    value: function () {\n      var _link = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(account, options) {\n        var message, user, erdAddress, ErdAddress, query, erdAddressRecord, data, signature, authData;\n        return _regenerator.default.wrap(function (_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                message = (options === null || options === void 0 ? void 0 : options.signingMessage) || MoralisErd.getSigningData();\n                _context4.next = 3;\n                return _ParseUser.default.current();\n\n              case 3:\n                user = _context4.sent;\n                erdAddress = account.toLowerCase();\n                ErdAddress = _ParseObject.default.extend('_ErdAddress');\n                query = new _ParseQuery.default(ErdAddress);\n                _context4.next = 9;\n                return query.get(erdAddress).catch(function () {\n                  return null;\n                });\n\n              case 9:\n                erdAddressRecord = _context4.sent;\n\n                if (erdAddressRecord) {\n                  _context4.next = 20;\n                  break;\n                }\n\n                _context4.next = 13;\n                return (0, _createSigningData.default)(message);\n\n              case 13:\n                data = _context4.sent;\n                _context4.next = 16;\n                return MoralisErd.sign(data);\n\n              case 16:\n                signature = _context4.sent;\n                authData = {\n                  id: erdAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context4.next = 20;\n                return user.linkWith('moralisErd', {\n                  authData: authData\n                });\n\n              case 20:\n                user.addAllUnique('erdAccounts', [erdAddress]);\n                user.set('erdAddress', erdAddress);\n                _context4.next = 24;\n                return user.save();\n\n              case 24:\n                return _context4.abrupt(\"return\", user);\n\n              case 25:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function () {\n        return _link.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"unlink\",\n    value: function () {\n      var _unlink = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(account) {\n        var _user$get;\n\n        var accountsLower, ErdAddress, query, erdAddressRecord, user, accounts, nextAccounts;\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                accountsLower = account.toLowerCase();\n                ErdAddress = _ParseObject.default.extend('_ErdAddress');\n                query = new _ParseQuery.default(ErdAddress);\n                _context5.next = 5;\n                return query.get(accountsLower);\n\n              case 5:\n                erdAddressRecord = _context5.sent;\n                _context5.next = 8;\n                return erdAddressRecord.destroy();\n\n              case 8:\n                _context5.next = 10;\n                return _ParseUser.default.current();\n\n              case 10:\n                user = _context5.sent;\n                accounts = (_user$get = user.get('erdAccounts')) !== null && _user$get !== void 0 ? _user$get : [];\n                nextAccounts = (0, _filter.default)(accounts).call(accounts, function (v) {\n                  return v !== accountsLower;\n                });\n                user.set('erdAccounts', nextAccounts);\n                user.set('erdAddress', nextAccounts[0]);\n                _context5.next = 17;\n                return user._unlinkFrom('moralisErd');\n\n              case 17:\n                _context5.next = 19;\n                return user.save();\n\n              case 19:\n                return _context5.abrupt(\"return\", user);\n\n              case 20:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function () {\n        return _unlink.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"sign\",\n    value: function () {\n      var _sign = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(data) {\n        return _regenerator.default.wrap(function (_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                return _context6.abrupt(\"return\", data);\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function () {\n        return _sign.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getSigningData\",\n    value: function () {\n      return 'Moralis Authentication';\n    }\n  }]);\n  return MoralisErd;\n}();\n\nvar _default = MoralisErd;\nexports.default = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}